<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible"
    content="IE=edge">
    <meta name="viewport"
    content="width=device-width, initial-scale=1.0">
    <title>Appointmed</title>
    <link rel="stylesheet" type="text/css"
    href="{% static "css/patient_home1.css" %}">
</head>

<body>
    
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const specialtyList = document.querySelectorAll("#specialization-list li a");
            const doctorList = document.querySelectorAll(".doctor-link");
            
            if (specialtyList.length > 0) {
                specialtyList[0].classList.add("selected");
                displaySpecialty(specialtyList[0].textContent.trim());
            }

            specialtyList.forEach(specialty => {
                specialty.addEventListener("click", function(event) {
                    event.preventDefault();
                    
                    specialtyList.forEach(item => item.classList.remove("selected"));
                    this.classList.add("selected");

                    displaySpecialty(this.textContent.trim());

                    console.log(this.textContent);
                });
            });

            function displaySpecialty(selected_specialty) {
                doctorList.forEach(card => {
                    const specialty = card.getAttribute("doctor-specialty");
                    if (specialty === selected_specialty) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            }

        });
    </script>
    

    <div class="main">
        <aside class="sidebar">
            <div class="doctor"><b>DOCTOR</b></div>
            <div class="bodyparts">
                    <ul id="specialization-list">
                        {% for specialization in specializations %}
                            <li><a href="" style="color: white; text-decoration: none;">{{ specialization }}</a></li>
                        {% endfor %}
                    </ul>
            </div>
            
        </aside>
    
    <header>
        <div class="navbar">
            <div class="logo">LOGO</div>
            <div class="menu">
                <a href="Appointmed.html">Home</a>
                <a href="{% url "patient about" %}">About</a>
                <a href="{% url "patient appointments" %}">Appointments</a>
                <a href="{% url "patient profile" %}"><i><b>Hi, User!</i></b></a>
            </div>
        </div>
    </header>


    <main class="doctor-cards">
        {% for doctor in doctors %}
            <div class="doctor-link" doctor-specialty="{{doctor.specialty}}">
                <div class="doctorprofile">
                    <div class="doctorname">Dr. {{ doctor.user.first_name }} {{ doctor.user.last_name }}</div>
                    <div class="doctortitle">Specialization: {{ doctor.specialty }}</div>
                    <div class="address">Address: {{ doctor.clinic_address }}</div>
                </div>
                
                <!-- Upon clicking a doctor card, it should expand. May ginawa ng doctor details si Jorge,
                 http://127.0.0.1:8000/patient/home/doctor/details/
                 Yung gawa ni Jorge, lumilipat sa other pages upon clicking a doctor card.
                 Gawin mo same page lang ang expansion with javascript.
                 Lagyan mo narin calendar. Ako na sa functionalities.

                <div class="doctorcard hidden">
                    <div class="left">
                        <img src="doctor-profile-image.jpg">
                        <p><strong>Specialization:</strong> {{ doctor.specialty }}</p>
                        <p><strong>Experience:</strong> 15+ years in neurosurgery</p>
                        <p><strong>Education:</strong> University of ABC Medical School</p>
                    </div>
                    <div class="middle">
                        <p>"Stop screaming, I'm scared too."</p>
                        <a href="#">View Patient Reviews</a>
                    </div>
                    <div class="right">
                        <p>Office Hours: 9:00 AM - 4:30 PM</p>
                    </div>
                </div>
                -->
            </div>
        {% endfor %}
    </main>
        
        </aside> 
    </div>
</body>
            
</html>